# intento 1: fallos en la función 'check_opcion' al entrar la variable eleccion como str
'''
La habitación infinita
'''
# Variables empleadas
puerta = 2
amuleto = False

# Texto de nuestra historia
introduccion = '\nEstás en medio de una habitación oscura con una única mesa en el centro y dos robustas puertas a cada lado. ¿Qué haces?'
eleccion_habitacion = 'Puedes:\n0. Buscar en la mesa.\n1. Cruzar la puerta de la derecha.\n2. Cruzar la puerta de la izquierda.'
eleccion_amuleto = 'Hay un amuleto extraño sobre la mesa, ¿quieres cogerlo? (Si o No)'

# Creamos una función para asegurar que todas las opciones introducidas por el usuario sean enteror dentro del rango de opciones
def check_opcion(eleccion, opciones, texto):
    while eleccion.isnumeric() != True or int(eleccion) < 0 or int(eleccion) > (opciones-1):
        print(f'\nLos siento, no te he entendido. Elige una de las {opciones} opciones.')
        eleccion = input(texto)
    return int(eleccion)

# Comienza la historia interminable
while puerta == 2:
    print(introduccion)
    eleccion = input(eleccion_habitacion)
    eleccion = check_opcion(eleccion, 3, eleccion_habitacion)

    # Opciones para 'Buscar en la mesa'
    if eleccion == 0:
        if amuleto == False:
            eleccion = input(eleccion_amuleto)
            if eleccion.lower() == 'si':
                amuleto = True
                print('Has cogido el amuleto.\n')
        else:
            print('No hay nada llamativo.\n')
    # Opción para la puerta de la derecha
    elif eleccion == 1:
        puerta = eleccion
        print(f'Cruzas la puerta {eleccion}.\n')
        break
    # Opción para la puerta de la izquierda
    elif eleccion == 2:
        puerta = eleccion
        print(f'Cruzas la puerta {eleccion}.\n')
        if amuleto == True:
            break

# El bucle while sólo contempla salir con las opciones de cruzar las puertas, según la que cruces...
if puerta == 1:
    print('Has perdido')
else:
    print('Has ganado')